/*!
* basket.js
* v0.5.2 - 2017-06-14
* http://addyosmani.github.com/basket.js
* (c) Addy Osmani;  License
* Created by: Addy Osmani, Sindre Sorhus, Andr√©e Hansson, Mat Scales
* Contributors: Ironsjp, Mathias Bynens, Rick Waldron, Felipe Morais
*/
!function(a,b){"use strict";function c(a){this.status="pending",this.resolveFunc=function(){},this.rejectFunc=function(){},a(this.resolve.bind(this),this.reject.bind(this))}var d=b.body||b.getElementsByTagName("body")[0],e="basket-",f=5e3,g=[];c.prototype.resolve=function(a){var b=this;"pending"===this.status&&(this.status="resolved",this.value=a,setTimeout(function(){b.resolveFunc(b.value)},0))},c.prototype.reject=function(a){var b=this;"pending"===this.status&&(this.status="rejected",this.value=a,setTimeout(function(){b.rejectFunc(b.value)},0))},c.prototype.then=function(a,b){var d=this;return new c(function(c,e){function f(){var b=a(d.value);b&&"function"==typeof b.then?b.then(c,e):c(b)}function g(){var a=b(d.value);a&&"function"==typeof a.then?a.then(c,e):c(a)}d.resolveFunc=f,d.rejectFunc=g})},c.all=function(a){if(!Array.isArray(a))throw new TypeError("You must pass an array to all.");return new c(function(b,c){function d(a){return function(b){f(a,b)}}function e(a){c(a)}function f(a,c){h[a]=c,0==--j&&b(h)}for(var g=0,h=[],i=a.length,j=i;g<i;g++)a[g].then(d(g),e)})};var h=function(a,b){try{return localStorage.setItem(e+a,JSON.stringify(b)),!0}catch(f){if(f.name.toUpperCase().indexOf("QUOTA")>=0){var c,d=[];for(c in localStorage)0===c.indexOf(e)&&d.push(JSON.parse(localStorage[c]));return d.length?(d.sort(function(a,b){return a.stamp-b.stamp}),basket.remove(d[0].key),h(a,b)):void 0}return}},i=function(a){return new c(function(b,c){var d=new XMLHttpRequest;d.open("GET",a),d.onreadystatechange=function(){4===d.readyState&&(200===d.status||0===d.status&&d.responseText?b({content:d.responseText,type:d.getResponseHeader("content-type")}):c(new Error(d.statusText)))},setTimeout(function(){d.readyState<4&&d.abort()},basket.timeout),d.send()})},j=function(a){return i(a.url).then(function(b){var c=k(a,b);return a.skipCache||h(a.key,c),c})},k=function(a,b){var c=+new Date;return a.data=b.content,a.originalType=b.type,a.type=a.type||b.type,a.skipCache=a.skipCache||!1,a.stamp=c,a.expire=c+60*(a.expire||f)*60*1e3,a},l=function(a,b){return!a||a.expire-+new Date<0||b.unique!==a.unique||basket.isValidItem&&!basket.isValidItem(a,b)},m=function(a){var b,d,e;if(a.url)return a.key=a.key||a.url,b=basket.get(a.key),a.execute=!1!==a.execute,e=l(b,a),a.live||e?(a.unique&&(a.url+=(a.url.indexOf("?")>0?"&":"?")+"basket-unique="+a.unique),d=j(a),a.live&&!e&&(d=d.then(function(a){return a},function(){return b}))):(b.type=a.type||b.originalType,b.execute=a.execute,d=new c(function(a){a(b)})),d},n=function(a){var c=b.createElement("script");c.text=a.data,d.appendChild(c)},o={default:n},p=function(a){return a.type&&o[a.type]?o[a.type](a):o.default(a)},q=function(a){return a.map(function(a){return a.execute&&p(a),a})},r=function(){var a,b,d=[];for(a=0,b=arguments.length;a<b;a++)d.push(m(arguments[a]));return c.all(d)};a.basket={require:function(){for(var a=0,b=arguments.length;a<b;a++)arguments[a].execute=!1!==arguments[a].execute,arguments[a].once&&g.indexOf(arguments[a].url)>=0?arguments[a].execute=!1:!1!==arguments[a].execute&&g.indexOf(arguments[a].url)<0&&g.push(arguments[a].url);return r.apply(null,arguments).then(q)},remove:function(a){return localStorage.removeItem(e+a),this},get:function(a){var b=localStorage.getItem(e+a);try{return JSON.parse(b||"false")}catch(a){return!1}},clear:function(a){var b,c,d=+new Date;for(b in localStorage)(c=b.split(e)[1])&&(!a||this.get(c).expire<=d)&&this.remove(c);return this},isValidItem:null,timeout:5e3,addHandler:function(a,b){Array.isArray(a)||(a=[a]),a.forEach(function(a){o[a]=b})},removeHandler:function(a){basket.addHandler(a,void 0)}},basket.clear(!0)}(this,document);
//# sourceMappingURL=basket.min.js.map